(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24c5acbb"],{"73e7":function(e,t,r){},"8f51":function(e,t,r){"use strict";r("73e7")},c137:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-table",{attrs:{data:e.topics,stripe:""}},[r("el-table-column",{attrs:{prop:"studentId",label:"学生ID"}}),r("el-table-column",{attrs:{prop:"topicName",label:"选题名称"}}),r("el-table-column",{attrs:{prop:"topicDescription",label:"选题描述"}}),r("el-table-column",{attrs:{formatter:e.formatStatus,prop:"topicStatus",label:"选题状态"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.topicStatus?r("el-button",{attrs:{type:"success",size:"small"},on:{click:function(r){return e.handleReview(t.row,!0)}}},[e._v(" 通过 ")]):e._e(),1===t.row.topicStatus?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.handleReview(t.row,!1)}}},[e._v(" 不通过 ")]):r("el-button",{attrs:{disabled:!0,size:"small"}},[e._v(" 已审核 ")])]}}])})],1),e.topics.length?e._e():r("el-empty",{attrs:{description:"暂无选题数据"}})],1)},a=[],c=r("c7eb"),n=r("1da1"),o=(r("99af"),r("d81d"),r("d3b7"),{data:function(){return{topics:[]}},created:function(){var e=this;return Object(n["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchTopics();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchTopics:function(){var e=this;return Object(n["a"])(Object(c["a"])().mark((function t(){var r,s,a,n,o,i;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="T001",s="http://localhost:9001/teacher/getTopics?userId=".concat(r),a=new Headers,a.append("User-Agent","Apifox/1.0.0 (https://apifox.com)"),n={method:"POST",headers:a,redirect:"follow"},t.prev=5,t.next=8,fetch(s,n);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,i.success?e.topics=i.message:e.$message.error("获取选题列表失败"),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("Error:",t.t0),e.$message.error("请求失败");case 19:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleReview:function(e,t){var r=this;return Object(n["a"])(Object(c["a"])().mark((function s(){var a,n,o,i,u;return Object(c["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a="http://localhost:9001/teacher/judgeTopic?studentId=".concat(e.studentId,"&isPass=").concat(t),n=new Headers,n.append("User-Agent","Apifox/1.0.0 (https://apifox.com)"),o={method:"POST",headers:n,redirect:"follow"},s.prev=4,s.next=7,fetch(a,o);case 7:return i=s.sent,s.next=10,i.json();case 10:u=s.sent,u.success?(r.$message.success("选题状态已更新"),r.topics=r.topics.map((function(e){return e.topicId===u.message.topicId?u.message:e}))):r.$message.error("更新选题状态失败"),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](4),console.error("Error:",s.t0),r.$message.error("请求失败");case 18:case"end":return s.stop()}}),s,null,[[4,14]])})))()},formatStatus:function(e,t,r){var s={0:"未提交",1:"审核中",2:"通过评审",3:"未通过评审"};return s[r]||"未知状态"}}}),i=o,u=(r("8f51"),r("2877")),l=Object(u["a"])(i,s,a,!1,null,"c3411762",null);t["default"]=l.exports}}]);