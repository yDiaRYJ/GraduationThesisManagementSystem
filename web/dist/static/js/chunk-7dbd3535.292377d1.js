(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dbd3535"],{"2d61":function(e,t,r){},c91b:function(e,t,r){"use strict";r("2d61")},dc72:function(e,t,r){"use strict";r.r(t);var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{staticStyle:{width:"300px","margin-bottom":"20px"},attrs:{placeholder:"请输入学生ID"},model:{value:e.studentId,callback:function(t){e.studentId=t},expression:"studentId"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.fetchStudentDocs}},[e._v("查找文件")]),e.docs.length>0?r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.docs}},[r("el-table-column",{attrs:{prop:"docId",label:"文档ID"}}),r("el-table-column",{attrs:{formatter:e.formatDocType,label:"文档类别"}}),r("el-table-column",{attrs:{formatter:e.formatDocStatus,label:"文档状态"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.downloadDoc(t.row)}}},[e._v("下载")]),r("el-button",{attrs:{type:"success",size:"small"},on:{click:function(r){return e.judgeDoc(t.row,!0)}}},[e._v("审核通过")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.judgeDoc(t.row,!1)}}},[e._v("审核不通过")])]}}],null,!1,2973265733)})],1):e._e(),e.error?r("el-alert",{attrs:{title:"错误",type:"error",description:e.error,"show-icon":""}}):e._e()],1)},n=[],o=r("c7eb"),a=r("1da1"),s=(r("99af"),r("c740"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("bf19"),r("9861"),{data:function(){return{studentId:"",docs:[],error:""}},methods:{fetchStudentDocs:function(){var e=this;return Object(a["a"])(Object(o["a"])().mark((function t(){var r,c;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.studentId){t.next=3;break}return e.error="请输入学生ID",t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch("http://localhost:9001/teacher/getStudentDocs?studentId=".concat(e.studentId),{method:"POST",headers:new Headers({"User-Agent":"Apifox/1.0.0 (https://apifox.com)"}),redirect:"follow"});case 6:return r=t.sent,t.next=9,r.json();case 9:c=t.sent,200===c.code&&c.success?(e.docs=c.message,e.error=""):(e.error=c.message||"未能获取文件信息",e.docs=[]),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),e.error="请求失败",e.docs=[];case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))()},downloadDoc:function(e){var t=this;return Object(a["a"])(Object(o["a"])().mark((function r(){var c,n,a,s;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("http://localhost:9001/teacher/downloadDoc?studentId=".concat(t.studentId,"&docType=").concat(e.docType),{method:"POST",headers:new Headers({"User-Agent":"Apifox/1.0.0 (https://apifox.com)"}),redirect:"follow"});case 3:if(c=r.sent,!c.ok){r.next=17;break}return r.next=7,c.blob();case 7:n=r.sent,a=window.URL.createObjectURL(n),s=document.createElement("a"),s.href=a,s.download="".concat(e.docPath.split("\\").pop()),document.body.appendChild(s),s.click(),s.remove(),r.next=18;break;case 17:t.error="下载失败";case 18:r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](0),t.error="请求失败";case 23:case"end":return r.stop()}}),r,null,[[0,20]])})))()},judgeDoc:function(e,t){var r=this;return Object(a["a"])(Object(o["a"])().mark((function c(){var n,a,s,d;return Object(o["a"])().wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("http://localhost:9001/teacher/judgeDoc?studentId=".concat(r.studentId,"&docType=").concat(e.docType,"&isPass=").concat(t),{method:"POST",headers:new Headers({"User-Agent":"Apifox/1.0.0 (https://apifox.com)"}),redirect:"follow"});case 3:return n=c.sent,c.next=6,n.json();case 6:a=c.sent,200===a.code&&a.success?(s=a.message,d=r.docs.findIndex((function(e){return e.docId===s.docId})),-1!==d&&r.$set(r.docs,d,s)):r.error="审核失败",c.next=13;break;case 10:c.prev=10,c.t0=c["catch"](0),r.error="请求失败";case 13:case"end":return c.stop()}}),c,null,[[0,10]])})))()},formatDocType:function(e){var t={1:"开题报告",2:"中期文档",3:"论文初稿",4:"检测版论文",5:"论文终稿"};return t[e.docType]||"未知类别"},formatDocStatus:function(e){var t={0:"未提交",1:"评审中",2:"通过评审",3:"未通过评审"};return t[e.docStatus]||"未知状态"}}}),d=s,u=(r("c91b"),r("2877")),l=Object(u["a"])(d,c,n,!1,null,"e52c1ae2",null);t["default"]=l.exports}}]);