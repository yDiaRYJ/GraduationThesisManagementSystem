(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d876831"],{2722:function(t,e,s){"use strict";s("ad62")},ad62:function(t,e,s){},cb2e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report-submission"},[s("el-form",{ref:"form",attrs:{model:t.form}},[s("el-form-item",{attrs:{label:"上传中期审核材料"}},[s("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":t.beforeUpload,"file-list":t.fileList,"http-request":t.uploadRequest,"show-file-list":!1}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 PDF 文件")])],1)],1),s("el-form-item",{attrs:{label:"审核状态"}},[s("el-tag",{attrs:{type:t.statusType}},[t._v(t._s(t.statusMessage))])],1)],1)],1)},n=[],o=s("5530"),u=(s("99af"),s("d3b7"),s("2f62")),r={data:function(){return{form:{},fileList:[],statusType:"success",statusMessage:"",uploadUrl:"http://localhost:9001/student/uploadFile",docInfoUrl:"http://localhost:9001/student/getDocInfo",docType:3}},computed:Object(o["a"])({},Object(u["c"])(["userId"])),mounted:function(){this.fetchDocInfo()},methods:{beforeUpload:function(t){var e="application/pdf"===t.type;return e||this.$message.error("只能上传 PDF 文件"),e},uploadRequest:function(t){var e=this,s=t.file,a=t.onSuccess,n=t.onError,o=new FormData;o.append("file",s.raw||s),o.append("userId",this.userId),o.append("docType",this.docType);var u=new Headers;u.append("User-Agent","Apifox/1.0.0 (https://apifox.com)"),fetch(this.uploadUrl,{method:"POST",headers:u,body:o}).then((function(t){return t.json()})).then((function(t){t.success?(e.statusType=e.getStatusType(t.message.docStatus),e.statusMessage=e.getStatusMessage(t.message.docStatus)):(e.statusType="danger",e.statusMessage=t.message||"上传失败"),a(t)})).catch((function(t){e.statusType="danger",e.statusMessage="上传失败",n(t)}))},getStatusType:function(t){switch(t){case 0:return"warning";case 1:return"info";case 2:return"success";case 3:return"danger";default:return"default"}},getStatusMessage:function(t){switch(t){case 0:return"未提交";case 1:return"评审中";case 2:return"通过评审";case 3:return"未通过评审";default:return"状态未知"}},fetchDocInfo:function(){var t=this,e=new Headers;e.append("User-Agent","Apifox/1.0.0 (https://apifox.com)"),fetch("".concat(this.docInfoUrl,"?userId=").concat(this.userId,"&docType=").concat(this.docType),{method:"POST",headers:e}).then((function(t){return t.json()})).then((function(e){if(e.success){var s=e.message.docStatus;t.statusType=t.getStatusType(s),t.statusMessage=t.getStatusMessage(s)}else t.statusType="danger",t.statusMessage="获取状态失败"})).catch((function(e){t.statusType="danger",t.statusMessage="获取状态失败"}))}}},c=r,i=(s("2722"),s("2877")),d=Object(i["a"])(c,a,n,!1,null,"6a1dfdde",null);e["default"]=d.exports}}]);